<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Canvas</title>
    <link href="./assets/vendor/Bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Using Font Awesome for some icons; Bootstrap Icons can also be loaded if needed -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="./assets/css/style.css" rel="stylesheet">
  </head>
  <body class="new-launches-page">
    <div class="main-wrapper">
      <div id="app" class="app">
        <header id="header" class="header">
          <div class="logo-place">
            <a href="#/">
              <img src="./assets/images/hll-logo-128.gif" alt="logo" style="margin: auto;">
            </a>
          </div>
          <div class="page-heading text-center">
            <span class="header-text1">CANVAS</span>
            <span class="header-text2"></span>
          </div>
          <div class="header-block header-block-nav">
            <ul class="nav nav-profile d-flex align-items-center">
              <li class="nav-item dropdown notification" style="display: none;">
                <a class="nav-link" href="#" role="button" id="notificationDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="fa fa-bell-o icon" onclick="hideNotificationCircle()">
                    <i class="fa fa-circle notification-circle"></i>
                    <span class="num"></span>
                  </i>
                </a>
                <div class="dropdown-menu" aria-labelledby="notificationDropdown">
                  <div class="text-center">
                    <strong>No new notification</strong>
                  </div>
                </div>
              </li>
              <li id="avatar" class="nav-item">
                <img src="./assets/images/avatar.png" alt="Avatar" class="avatar rounded-circle">
              </li>
              <li class="nav-item username ml-2">Neha Dudhoria</li>
              <li class="nav-item dropdown profile ml-2">
                <a href="javascript:void(0)" class="nav-link" id="profileDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="fa fa-caret-down"></i>
                </a>
                <div class="dropdown-menu" aria-labelledby="profileDropdown">
                  <a href="javascript:void(0)" class="dropdown-item">
                    <i class="fa fa-lock"></i> Change Password
                  </a>
                  <div class="dropdown-divider"></div>
                  <a href="javascript:void(0)" class="dropdown-item">
                    <i class="fa fa-power-off"></i> Logout
                  </a>
                </div>
              </li>
            </ul>
          </div>
        </header>
        <!-- ./header -->
        <aside class="sidebar" style="left: 0 !important;">
          <div class="sidebar-container">
            <div class="sidebar-header"></div>
            <nav class="menu">
              <ul id="sidebar-menu" class="nav flex-column">
                <li class="nav-item">&nbsp;</li>
                <li class="nav-item">
                  <a class="nav-link" href="#/">
                    <i class="fa fa-home"></i> Home
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#/portfolio">
                    <i class="fa fa-briefcase"></i> Portfolio
                  </a>
                </li>
                <li class="nav-item active">
                  <a class="nav-link" href="#/launches">
                    <i class="fa fa-laptop"></i> New Launches
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#/refresh">
                    <i class="fa fa-refresh"></i> Transitions &amp; Updates
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#/extension">
                    <i class="fa fa-plus"></i> Extension
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#/deployment-summary">
                    <i class="fa fa-file-text-o"></i> Deployment Summary
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </aside>
        <!-- ./sidebar -->

        <div id="includedContent" class="main-content new-launches">
          <div class="diff-list-heading">
            <div class="row">
              <div class="col-md-6">
                <div class="someTextt">
                  <p>Launches Written Content</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="goBack">
                  <a href="#/launches">
                    <i class="fa fa-angle-left"></i>
                    <span>Launches</span>
                  </a>
                </div>
              </div>
            </div>
            <!-- ./row -->
          </div>
          <!-- ./diff-list-heading -->
          <div class="content-header">
            <div class="row">
              <div class="col-md-1"></div>
              <div class="col-md-10">
                <table width="100%" cellspacing="0" cellpadding="0" style="margin-bottom: 15px; margin-top: 20px;">
                  <tbody class="noborder">
                    <tr class="noborder" style="line-height: 0px;">
                      <td class="noborder" style="padding-bottom: 26px;">
                        <div class="workspace-progress">
                          <ul class="workspace-progress-num">
                            <li class="text active">
                              <a href="#/launches">Product Details</a>
                            </li>
                            <li class="text active">Send For SM Review</li>
                            <li class="text active">SM Approved</li>
                            <li class="text active">
                              <a href="#/launches/launches-written-content">Written Content</a>
                            </li>
                            <li class="text">Visual Content</li>
                            <li class="text">Send For Content Review</li>
                            <li class="text">Published</li>
                          </ul>
                        </div>
                        <div class="workspace-progress margin">
                          <div class="workspace-progress-bar" style="width: 49.5%;"></div>
                          <div class="progress-bar-grey1 workspace-progress-bar" style="left: 49.7%; width: 49%; background: #D3D3D3;"></div>
                          <ul class="workspace-progress-num">
                            <a href="#/launches">
                              <li class="step active">
                                <i class="fa fa-check"></i>
                              </li>
                            </a>
                            <li class="step active">
                              <i class="fa fa-check"></i>
                            </li>
                            <li class="step active">
                              <i class="fa fa-check"></i>
                            </li>
                            <a href="#/launches/launches-written-content">
                              <li class="step active">
                                <i class="fa fa-check"></i>
                              </li>
                            </a>
                            <li class="step default">
                              <i class="fa fa-check"></i>
                            </li>
                            <li class="step default">
                              <i class="fa fa-check"></i>
                            </li>
                            <li class="step default">
                              <i class="fa fa-check"></i>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    <tr class="noborder" style="line-height: 0px;">
                      <td class="noborder">
                        <div class="workspace-progress">
                          <ul class="workspace-progress-num">
                            <li> </li>
                            <li> </li>
                            <li> </li>
                            <li> </li>
                            <li class="text" style="margin-left: 34%;">Visual Content</li>
                            <li class="text">Send For Content Review</li>
                            <li class="text">Published</li>
                          </ul>
                        </div>
                        <div class="workspace-progress margin">
                          <div class="workspace-progress-bar" style="width: 5%;left: 54%;top: -119%;transform: rotate(90deg); background: #D3D3D3;"></div>
                          <div class="progress-bar-grey1 workspace-progress-bar" style="left: 56.6%; width: 42%; background: #D3D3D3;"></div>
                          <ul class="workspace-progress-num">
                            <li> </li>
                            <li> </li>
                            <li> </li>
                            <li> </li>
                            <li class="step default">
                              <i class="fa fa-check"></i>
                            </li>
                            <li class="step default">
                              <i class="fa fa-check"></i>
                            </li>
                            <li class="step default">
                              <i class="fa fa-check"></i>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="row sum-details1">
              <div class="col-md-12">
                <table class="table mb-0">
                  <thead>
                    <tr>
                      <th><span>Workspace</span></th>
                      <th><span>MOC</span></th>
                      <th><span>Launch Type</span></th>
                      <th><span>Platforms</span></th>
                      <th><span>BigC</span></th>
                      <th><span>SmallC</span></th>
                      <th><span>Exception</span></th>
                      <th><span>Scorecard</span></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="noborder">
                      <td class="noborder">
                        <p class="prjName">Tresemme Winter Launch</p>
                      </td>
                      <td class="noborder">
                        <p>11-24</p>
                      </td>
                      <td class="noborder">
                        <p>New Launch</p>
                      </td>
                      <td class="noborder">
                        <img class="tag-brand-logo" src="assets/images/retailer/amazon.png" alt="Amazon" title="Amazon">
                      </td>
                      <td class="noborder">
                        <p>BPC</p>
                      </td>
                      <td class="noborder">
                        <p>BG_BB03 : HAIR CARE</p>
                      </td>
                      <td class="noborder">
                        <a href="javascript:void(0)" class="upload-download-purple" data-bs-toggle="modal" data-bs-target="#exceptionModal">
                          <i class="fa fa-exclamation-triangle"></i>
                        </a>
                        <a href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#exceptionApprovalModal">Approval Modal</a>
                      </td>
                      <td class="noborder">
                        <span class="score" style="font-size: 20px; font-family: ui-sans-serif;">
                          <a href="javascript:void(0)" style="font-size: 14px; color: orange; margin-left: 18px; text-decoration: none;">
                            6 / 10
                          </a>
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div id="uploadImages" class="body_contain new-launches-tabs">
            <div class="container-fluid">
              <div class="row">
                <div class="col-lg-12">
                  <!-- Right Side (AI Content) -->
                  <div class="mt-3 d-flex flex-column">
                    <div class="uploadimg-section d-flex align-items-center justify-content-between">
                      <ul class="nav nav-tabs w-75 border-0 d-flex" id="tabSet1" role="tablist">
                        <li class="nav-item flex-fill d-flex justify-content-center" role="presentation">
                          <button class="nav-link p-0 border-0 w-100" id="optiona-tab" data-bs-toggle="tab" 
                                  data-bs-target="#optiona-tab-pane" type="button" role="tab">Images 
                            <i class="fa fa-circle text-success ps-3"></i>
                          </button>
                        </li>
                        <li class="nav-item flex-fill d-flex justify-content-center" role="presentation">
                          <button class="nav-link p-0 border-0 w-100" id="optionb-tab" data-bs-toggle="tab" 
                                  data-bs-target="#optionb-tab-pane" type="button" role="tab">A+ 
                            <i class="fa fa-circle text-success ps-3"></i>
                          </button>
                        </li>
                        <li class="nav-item flex-fill d-flex justify-content-center" role="presentation">
                          <button class="nav-link p-0 border-0 w-100" id="optionc-tab" data-bs-toggle="tab" 
                                  data-bs-target="#optionc-tab-pane" type="button" role="tab">Video 
                            <i class="fa fa-circle text-success ps-3"></i>
                          </button>
                        </li>
                        <li class="nav-item flex-fill d-flex justify-content-center" role="presentation">
                          <button class="nav-link p-0 border-0 w-100" id="optiond-tab" data-bs-toggle="tab" 
                                  data-bs-target="#optiond-tab-pane" type="button" role="tab">Documents 
                            <i class="fa fa-circle text-success ps-3"></i>
                          </button>
                        </li>
                        <li class="nav-item flex-fill d-flex justify-content-center" role="presentation">
                          <button class="nav-link p-0 border-0 w-100 active" id="optione-tab" data-bs-toggle="tab" 
                                  data-bs-target="#optione-tab-pane" type="button" role="tab">Paid Asset Master 
                            <i class="fa fa-circle text-success ps-3"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <div class="tab-content" id="myImageTabContent">
                      <div class="tab-pane fade" id="optiona-tab-pane" role="tabpanel" aria-labelledby="optiona-tab" tabindex="0">
                        <div class="container-fluid">
                          <!-- Top Section for Upload Images with Unique IDs -->
                          <div class="d-flex justify-content-between align-items-center mb-4">
                            <!-- Left Section: Dropdowns and Expand/Collapse CTA -->
                            <div class="d-flex align-items-center gap-2">
                              <select id="idDropdownTab" class="form-control form-select form-select-sm custom-select">
                                <option value="90001">90001</option>
                              </select>
                              <div class="dropdown select-with-dot d-flex align-items-center">
                                <div class="dropdown-inner">
                                  <button
                                    id="accountDropdownBtn"
                                    class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center"
                                    type="button"
                                    data-bs-toggle="dropdown"
                                    aria-expanded="false"
                                    disabled
                                  >
                                    <span class="dropdown-label">All Accounts</span>
                                  </button>
                                  <ul class="dropdown-menu" aria-labelledby="accountDropdownBtn">
                                    <li>
                                      <a class="dropdown-item d-flex align-items-center justify-content-between"
                                        href="#"
                                        data-value="all"
                                        data-dot=""
                                      >
                                        <span>All Accounts</span>
                                        <span class="status-dot"></span>
                                      </a>
                                    </li>
                                    <li>
                                      <a class="dropdown-item d-flex align-items-center justify-content-between"
                                        href="#"
                                        data-value="amazon"
                                        data-dot="green"
                                      >
                                        <span>Amazon</span>
                                        <span class="status-dot green"></span>
                                      </a>
                                    </li>
                                    <li>
                                      <a class="dropdown-item d-flex align-items-center justify-content-between"
                                        href="#"
                                        data-value="bigbasket"
                                        data-dot="red"
                                      >
                                        <span>BigBasket</span>
                                        <span class="status-dot red"></span>
                                      </a>
                                    </li>
                                  </ul>
                                </div>
                                <span id="accountStatusDot" class="status-dot"></span>
                              </div>

                              <!-- <div class="select-with-dot">
                                <select id="accountDropdownTab" class="form-control form-select form-select-sm custom-select" disabled>
                                  <option value="all" data-dot="">All Accounts</option>
                                  <option value="amazon" data-dot="green">Amazon</option>
                                  <option value="bigbasket" data-dot="red">BigBasket</option>
                                </select>
                                <span id="accountStatusDot" class="status-dot"></span>
                              </div> -->
                              
                              <button id="toggleExpandTab" class="cta cta-outline-primary d-flex align-items-center gap-2">
                                <i class="fa fa-angle-double-down" aria-hidden="true"></i>
                                <span class="expand-text">Expand</span>
                              </button>
                            </div>
                            <!-- Right Section: Bulk Upload -->
                            <div class="d-flex align-items-center gap-2">
                              <button id="bulkUploadBtnTab" class="cta cta-secondary" data-bs-toggle="modal" data-bs-target="#bulkImageUploadModal">Bulk Upload</button>
                              <p class="p-0 m-0 d-flex align-items-center gap-1" style="font-size: 12px;">
                                <span class="text-danger">Note: Bulk upload images of all basepacks here</span>
                                <i class="fa fa-info-circle" aria-hidden="true"></i>
                              </p>
                              <!-- Hidden file input for Bulk Upload -->
                              <input type="file" id="bulkFileInputTab" style="display: none;" multiple accept="image/*">
                            </div>
                          </div>
                        
                          <!-- Cards Container (Unified view) -->
                          <div id="cardsContainerTab" class="row g-3">
                            <!-- Card 1: BOP* -->
                            <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                              <div class="card image-card" draggable="true">
                                <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                  <div class="card-title-container">
                                    <span class="card-title">BOP <span class="text-danger">*</span></span>
                                    <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                    <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                  </div>
                                  <span class="action-area">
                                    <span class="score"></span>
                                    <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                  </span>
                                </div>
                                <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                  <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                  <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                </div>
                              </div>
                            </div>
                        
                            <!-- Card 2: HERO* -->
                            <div class="col-md-2 card-wrapper" data-card-name="HERO" data-info="This is the HERO card tooltip.">
                              <div class="card image-card" draggable="true">
                                <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                  <div class="card-title-container">
                                    <span class="card-title">BOP <span class="text-danger">*</span></span>
                                    <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                    <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                  </div>
                                  <span class="action-area">
                                    <span class="score"></span>
                                    <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                  </span>
                                </div>
                                <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                  <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                  <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                </div>
                              </div>
                            </div>
                        
                            <!-- Card 3: FOP* -->
                            <div class="col-md-2 card-wrapper" data-card-name="FOP" data-info="This is the FOP card tooltip.">
                              <div class="card image-card" draggable="true">
                                <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                  <div class="card-title-container">
                                    <span class="card-title">BOP <span class="text-danger">*</span></span>
                                    <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                    <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                  </div>
                                  <span class="action-area">
                                    <span class="score"></span>
                                    <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                  </span>
                                </div>
                                <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                  <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                  <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                </div>
                              </div>
                            </div>
                        
                            <!-- Card 4: EAN* -->
                            <div class="col-md-2 card-wrapper" data-card-name="EAN" data-info="This is the EAN card tooltip.">
                              <div class="card image-card" draggable="true">
                                <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                  <div class="card-title-container">
                                    <span class="card-title">BOP <span class="text-danger">*</span></span>
                                    <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                    <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                  </div>
                                  <span class="action-area">
                                    <span class="score"></span>
                                    <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                  </span>
                                </div>
                                <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                  <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                  <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                </div>
                              </div>
                            </div>
                        
                            <!-- Card 5: S1 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S1" data-info="Detailed information about S1.">
                              <div class="card image-card" draggable="true">
                                <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                  <div class="card-title-container">
                                    <span class="card-title">BOP <span class="text-danger">*</span></span>
                                    <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                    <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                  </div>
                                  <span class="action-area">
                                    <span class="score"></span>
                                    <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                  </span>
                                </div>
                                <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                  <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                  <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                </div>
                              </div>
                            </div>
                        
                            <!-- Card 6: S2 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S2" data-info="Detailed information about S2.">
                              <div class="card image-card" draggable="true">
                                <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                  <div class="card-title-container">
                                    <span class="card-title">BOP <span class="text-danger">*</span></span>
                                    <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                    <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                  </div>
                                  <span class="action-area">
                                    <span class="score"></span>
                                    <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                  </span>
                                </div>
                                <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                  <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                  <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                </div>
                              </div>
                            </div>

                            <!-- Card 7: S3 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S3" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 8: S4 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S5" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 9: S5 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S5" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 10: S6 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S6" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 11: S7 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S7" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 12: S8 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S8" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 13: S9 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S9" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 14: S10 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S10" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 15: S11 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S11" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 16: S12 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S12" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 17: S13 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S13" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>

                            <!-- Card 18: S14 -->
                            <div class="col-md-2 card-wrapper" data-card-name="S14" data-info="Detailed information about S2.">
                                <div class="card image-card" draggable="true">
                                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                      <div class="card-title-container">
                                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                                        <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                      </div>
                                      <span class="action-area">
                                        <span class="score"></span>
                                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                      </span>
                                    </div>
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                        <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                        <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                    </div>
                                </div>
                            </div>
                            <!-- (Repeat additional card blocks for S3 to S14 as needed) -->
                          </div>
                        
                          <!-- Hidden file input for individual card uploads -->
                          <input type="file" id="cardFileInputTab" accept="image/*" style="display: none;">
                        
                          <!-- Save Button at the bottom right -->
                          <div class="d-flex justify-content-end mt-3">
                            <button id="saveBtnTab" class="cta cta-primary ">Save</button>
                          </div>
                        </div>
                      </div>
                      <div class="tab-pane fade" id="optionb-tab-pane" role="tabpanel" aria-labelledby="optionb-tab" tabindex="0">
                        <!-- Tab 2 -->
                      </div>
                      <div class="tab-pane fade" id="optionc-tab-pane" role="tabpanel" aria-labelledby="optionc-tab" tabindex="0">
                        <!-- Tab 3 -->
                      </div>
                      <div class="tab-pane fade" id="optiond-tab-pane" role="tabpanel" aria-labelledby="optiond-tab" tabindex="0">
                        <!-- Tab 4 -->
                      </div>
                      <div class="tab-pane fade show active" id="optione-tab-pane" role="tabpanel" aria-labelledby="optione-tab" tabindex="0">
                        <!-- Tab 5 -->
                        <div class="container-fluid">
                          <!-- Top Section for Upload Images with Unique IDs -->
                          <div class="d-flex justify-content-between align-items-center mb-4">
                            <!-- Left Section: Dropdowns and Expand/Collapse CTA -->
                            <div class="d-flex align-items-center gap-2">
                              <select id="idDropdownTab" class="form-control form-select form-select-sm custom-select">
                                <option value="90001">90001</option>
                                <option value="90002">90002</option>
                                <option value="90003">90003</option>
                                <option value="90004">90004</option>
                                <option value="90005">90005</option>
                              </select>
                            </div>
                            <!-- Right Section: Bulk Upload -->
                            <div class="d-flex align-items-center gap-2">
                              <button id="importBtnTab" class="cta cta-primary" data-bs-toggle="modal" data-bs-target="#importUploadModal">Import</button>
                              <button id="bulkUploadBtnTab" class="cta cta-primary" data-bs-toggle="modal" data-bs-target="#bulkImageUploadModal">Bulk Upload</button>
                            </div>
                          </div>

                          <div id="cardsContainer">
                            <div class="card-wrapper-main row g-3 align-items-center mb-3">
                              <div class="col-md-2 card-wrapper text-center">
                                <h4>9:4</h4>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                            </div>

                            <div class="card-wrapper-main row g-3 align-items-center mb-3">
                              <div class="col-md-2 card-wrapper text-center">
                                <h4>9:4</h4>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                                <div class="card image-card" draggable="true">
                                  <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                                    <div class="card-title-container">
                                      <span class="card-title">BOP <span class="text-danger">*</span></span>
                                      <!-- Info icon is hidden by default, but will be shown on hover of the container -->
                                      <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                                    </div>
                                    <span class="action-area">
                                      <span class="score"></span>
                                      <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                                    </span>
                                  </div>
                                  <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                                    <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                                    <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                                  </div>
                                </div>
                              </div>

                            </div>

                            <div id="pamCardContainer" class="mt-4"></div>

                            <div class="action-button row">
                              <div class="col-md-12 d-flex justify-content-start">
                                <select id="pamAddDropdown" class="form-control form-select form-select-sm custom-select" style="width:140px">
                                  <option value="" disabled selected>Add PAM</option>
                                  <option value="9:4">9:4</option>
                                  <option value="4:3">4:3</option>
                                  <option value="1:1">1:1</option>
                                  <option value="9:1">9:1</option>
                                  <option value="1:6">1:6</option>
                                </select>
                              </div>
                            </div>

                            <div class="row mt-3">
                              <div class="col-md-12 d-flex gap-3 justify-content-end">
                                <button id="downloadScoreButton" class="cta cta-secondary" style="display:none">
                                  <span>
                                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-file-type-xls"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4" /><path d="M4 15l4 6" /><path d="M4 21l4 -6" /><path d="M17 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75" /><path d="M11 15v6h3" /></svg>
                                  </span>
                                  <span>Download Scorecard</span>
                                </button>
                                <button id="scoreBtn" class="cta cta-secondary" data-bs-toggle="modal" data-bs-target="#scoringProgressModal">Score</button>
                                <button id="submitBtn" class="cta cta-primary" data-bs-toggle="modal" data-bs-target="#validationModal">Submit</button>
                              </div>
                            </div>

                          </div> <!-- ./ end of cardsContainer -->
                        </div>
                      </div>
                      <div class="tab-pane fade" id="optionf-tab-pane" role="tabpanel" aria-labelledby="optionf-tab" tabindex="0">
                        <!-- Tab 6 -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>                      
          </div>
        </div>
        <!-- ./main-content -->
        
        <!-- Modal: Static Backdrop Save Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-body p-4">
                <h5 class="text-center">Written Content Uploaded Successfully</h5>
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-md-5"></div>
                    <div class="col-md-2 align-self-center">
                      <img src="./assets/images/check.png" alt="logo" class="img-fluid">
                    </div>
                    <div class="col-md-5"></div>
                  </div>
                </div>
                <div class="mt-4 text-center">
                  <button type="button" class="cta cta-primary" data-bs-dismiss="modal">Ok</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- ./modal -->
        
        <!-- Modal: Collapse Warning Modal -->
        <div class="modal fade" id="collapseModal" tabindex="-1">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-body text-center">
                <img src="./assets/images/info.svg" alt="Warning" class="img-fluid mb-3" style="width: 16%; height: auto;">
                <p class="mt-3">Collapsing the accounts will revert the changes made after expanding. Do you want to continue?</p>
                <div class="d-flex justify-content-center gap-2">
                  <button id="modalCancel" class="cta cta-secondary">Cancel</button>
                  <button id="modalContinue" class="cta cta-primary">Continue</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal: Exception Modal -->
        <div class="modal fade" id="exceptionModal" tabindex="-1">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-body text-start p-4">
                <div class="visual-exception-container">
                  <h1 class="form-title">Visual Content Exception</h1>
                  <form class="exception-form">
                    <p class="form-subtitle">
                      Submit your request to proceed without <span class="required">*</span>
                    </p>

                    <!-- Checkbox Group -->
                    <div class="checkbox-group m-0">
                      <div class="form-group m-0 d-inline-block">
                        <label class="checkbox-wrapper" for="imageCheckbox1">
                          <input type="checkbox" name="imageCheckbox" id="imageCheckbox1" />
                          <span class="form-label m-0 fw-bold">Image</span>
                        </label>
                      </div>
                      <div class="ps-3 mb-3">
                        <label class="checkbox-wrapper" for="mandatoryCheckbox">
                          <input type="checkbox" name="mandatoryCheckbox" id="mandatoryCheckbox" />
                          <span class="checkbox-label">Mandatory Image – FOP, EAN</span>
                        </label>
                        <label class="checkbox-wrapper" for="numImagesCheckbox">
                          <input type="checkbox" name="numImagesCheckbox" id="numImagesCheckbox" />
                          <span class="checkbox-label">Number of Images – 2</span>
                        </label>
                      </div>
                    </div>

                    <!-- Reason -->
                    <div class="form-group">
                      <label for="reason1" class="form-label d-flex justify-content-between">
                        <span>Reason <span class="required">*</span></span>
                        <small class="text-danger fw-normal">Please enter a reason to proceed</small>
                      </label>
                      <textarea id="reason1" class="form-textarea" placeholder="Please enter a reason to proceed"></textarea>
                    </div>

                    <hr>

                    <!-- Video -->
                    <div class="form-group">
                      <div class="checkbox-group mb-3 d-inline-block">
                        <label class="checkbox-wrapper" for="aPlusContent">
                          <input type="checkbox" name="aPlusContent" id="aPlusContent" />
                          <span class="form-label m-0 fw-bold">Video</span>
                        </label>
                      </div>

                      <!-- Reason for Video -->
                      <div class="form-group">
                        <label for="reason2" class="form-label d-flex justify-content-between">
                          <span>Reason <span class="required">*</span></span>
                          <small class="text-danger fw-normal">Please enter a reason to proceed</small>
                        </label>
                        <textarea id="reason2" class="form-textarea" placeholder="Enter Reason for Visual Content Exception Here"></textarea>
                      </div>

                      <hr>

                      <!-- Video -->
                      <div class="form-group">
                        <div class="checkbox-group d-inline-block mb-3">
                          <label class="checkbox-wrapper" for="videoCheckbox">
                            <input type="checkbox" name="videoCheckbox" id="videoCheckbox" />
                            <span class="form-label m-0 fw-bold">Documents</span>
                          </label>
                        </div>

                        <!-- Reason for Video -->
                        <div class="form-group">
                          <label for="reason3" class="form-label d-flex justify-content-between">
                            <span>Reason <span class="required">*</span></span>
                            <small class="text-danger fw-normal">Please enter a reason to proceed</small>
                          </label>
                          <textarea id="reason3" class="form-textarea" placeholder="Enter Reason for Visual Content Exception Here"></textarea>
                        </div>
                      </div> <!-- Closes Video form-group -->

                      <!-- Video -->
                      <div class="form-group">
                        <div class="checkbox-group d-inline-block mb-3">
                          <label class="checkbox-wrapper" for="videoCheckbox">
                            <input type="checkbox" name="videoCheckbox" id="videoCheckbox" />
                            <span class="form-label m-0 fw-bold">Paid Asset Master</span>
                          </label>
                        </div>

                        <!-- Reason for Video -->
                        <div class="form-group">
                          <label for="reason3" class="form-label d-flex justify-content-between">
                            <span>Reason <span class="required">*</span></span>
                            <small class="text-danger fw-normal">Please enter a reason to proceed</small>
                          </label>
                          <textarea id="reason3" class="form-textarea" placeholder="Enter Reason for Visual Content Exception Here"></textarea>
                        </div>
                      </div> <!-- Closes Video form-group -->

                      <!-- Buttons -->
                      <div class="d-flex justify-content-center gap-2">
                        <button type="button" id="modalClose" class="cta cta-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" id="modalSubmit" class="cta cta-primary">Submit</button>
                      </div>
                    </div> <!-- Closes A+ Content form-group -->
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal: Exception Modal -->
        <div class="modal fade" id="exceptionApprovalModal" tabindex="-1" aria-labelledby="exceptionApprovalModalLabel" aria-hidden="true" 
        data-bs-backdrop="static" data-bs-keyboard="false">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-body text-start p-4">
                <div class="visual-exception-container">
                  <h1 class="form-title">Visual Content Exception</h1>
                  <form class="exception-form">
                    <p class="form-subtitle">
                      Submit your request to proceed without <span class="required">*</span>
                    </p>

                    <!-- Checkbox Group -->
                    <div class="checkbox-group m-0">
                      <div class="form-group m-0 d-inline-block">
                        <label class="checkbox-wrapper" for="imageCheckbox1">
                          <input type="checkbox" name="imageCheckbox" id="imageCheckbox1" checked />
                          <span class="form-label m-0 fw-bold">Image</span>
                        </label>
                      </div>
                      <div class="ps-3 mb-3">
                        <label class="checkbox-wrapper" for="mandatoryCheckbox">
                          <input type="checkbox" name="mandatoryCheckbox" id="mandatoryCheckbox" checked />
                          <span class="checkbox-label">Mandatory Image – FOP, EAN</span>
                        </label>
                        <label class="checkbox-wrapper" for="numImagesCheckbox">
                          <input type="checkbox" name="numImagesCheckbox" id="numImagesCheckbox" checked />
                          <span class="checkbox-label">Number of Images – 2</span>
                        </label>
                      </div>
                    </div>

                    <!-- Reason -->
                    <div class="comment-group p-3 bg-body-secondary rounded-3 mb-2">
                      <div class="exception-log-container d-flex justify-content-between align-items-center mb-2">
                        <label class="m-0">Exception Log</label>
                        <p class="m-0">Neha Dudhoria</p>
                      </div>
                      <i>Mandatory Images not available for the product</i>
                      <div class="form-group mb-0 mt-2">
                        <label for="comment1" class="form-label d-flex justify-content-between">
                          <span>Comment <span class="required">*</span></span>
                        </label>
                        <textarea id="comment1" class="form-textarea" placeholder="Enter Comments"></textarea>
                      </div>
                    </div>

                    <hr>

                    <!-- A+ Content -->
                    <div class="form-group">
                      <div class="checkbox-group mb-3 d-inline-block">
                        <label class="checkbox-wrapper" for="aPlusContent">
                          <input type="checkbox" name="aPlusContent" id="aPlusContent" checked/>
                          <span class="form-label m-0 fw-bold">A+ Content</span>
                        </label>
                      </div>

                      <!-- Reason for A+ Content -->
                      <!-- Reason -->
                    <div class="comment-group p-3 bg-body-secondary rounded-3 mb-2">
                      <div class="exception-log-container d-flex justify-content-between align-items-center mb-2">
                        <label class="m-0">Exception Log</label>
                        <p class="m-0">Neha Dudhoria</p>
                      </div>
                      <i>A+ Content not available for the product</i>
                      <div class="form-group mb-0 mt-2">
                        <label for="comment1" class="form-label d-flex justify-content-between">
                          <span>Comment <span class="required">*</span></span>
                        </label>
                        <textarea id="comment1" class="form-textarea" placeholder="Enter Comments"></textarea>
                      </div>
                    </div>
                    </div>

                      <hr>

                      <!-- Video -->
                      <div class="form-group">
                        <div class="checkbox-group d-inline-block mb-3">
                          <label class="checkbox-wrapper" for="videoCheckbox">
                            <input type="checkbox" name="videoCheckbox" id="videoCheckbox" checked/>
                            <span class="form-label m-0 fw-bold">Video</span>
                          </label>
                        </div>

                        <!-- Reason for Video -->
                        <div class="comment-group p-3 bg-body-secondary rounded-3 mb-2">
                          <div class="exception-log-container d-flex justify-content-between align-items-center mb-2">
                            <label class="m-0">Exception Log</label>
                            <p class="m-0">Neha Dudhoria</p>
                          </div>
                          <i>Video not available for the product</i>
                          <div class="form-group mb-0 mt-2">
                            <label for="comment1" class="form-label d-flex justify-content-between">
                              <span>Comment <span class="required">*</span></span>
                            </label>
                            <textarea id="comment1" class="form-textarea" placeholder="Enter Comments"></textarea>
                          </div>
                        </div>
                      </div> <!-- Closes Video form-group -->

                      <!-- Buttons -->
                      <div class="d-flex justify-content-center gap-2">
                        <button type="button" id="modalCancel" class="cta cta-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" id="modalContinue" class="cta cta-primary">Continue</button>
                      </div>
                    </div> <!-- Closes A+ Content form-group -->
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        
        <!-- Modal: Lightbox Modal for enlarged image view -->
        <div id="lightboxModal" class="modal fade" tabindex="-1">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-body p-0 position-relative">
                <button type="button" class="btn-close position-absolute top-0 end-0 m-2" data-bs-dismiss="modal" aria-label="Close"></button>
                <img src="" alt="Lightbox Image" class="img-fluid w-100">
              </div>
            </div>
          </div>
        </div>

        <!-- Modal: Custom modal to upload images -->
        <div class="modal fade" id="singleimageUploadModal" tabindex="-1" aria-labelledby="singleimageUploadModalLabel" aria-hidden="true" 
        data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
        <div class="modal-body text-center">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-12">
                <!-- Custom Upload Wrapper -->
                <div id="cu_upload_wrapper" class="cu-upload-wrapper pt-3">

                  <!-- Drag and Drop Area -->
                  <div id="cu_drop_area" class="cu-upload-zone text-center p-5 border border-2 border-dashed rounded-3 mb-3">
                    <div class="cu-icon mb-3">
                      <i class="bi bi-file-earmark-arrow-up fs-2"></i>
                    </div>
                    <p class="mb-2">
                      Drag and Drop file here or
                      <span class="cu-choose-file text-primary" style="text-decoration: underline; cursor: pointer;">
                        Choose file
                      </span>
                    </p>
                    <!-- Hidden File Input -->
                    <input type="file" id="cu_file_upload" class="d-none" accept=".png,.jpg,.jpeg">
                  </div>

                  <!-- Info Row: Supported formats and Maximum size -->
                  <div class="row text-secondary small mb-4 justify-content-between cu-upload-info-row">
                    <div class="col-auto">
                      <span>Supported formats: PNG, JPG, JPEG</span>
                    </div>
                    <div class="col-auto">
                      <span>Maximum size: 25MB</span>
                    </div>
                  </div>

                  <!-- Upload Details Section (Hidden by Default) -->
                  <div id="cu_upload_details" class="cu-upload-details">
                    <div class="d-flex align-items-center mb-2 text-start">
                      <!-- Image thumbnail replaces the static icon -->
                      <img id="cu_thumbnail" src="" alt="Image Thumbnail" class="me-2" style="width: 64px; height: 64px; object-fit: cover; border-radius: 4px;">
                      <div>
                        <div id="cu_filename" class="cu-filename fw-bold mb-0">FileName.png</div>
                        <div id="cu_filesize" class="cu-filesize text-muted small">0 MB</div>
                      </div>
                      <!-- Delete Icon Button (Initially Hidden) -->
                      <button id="cu_delete_btn" class="btn btn-outline-danger btn-sm ms-auto d-none" title="Delete file">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-trash">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                          <path d="M4 7l16 0" />
                          <path d="M10 11l0 6" />
                          <path d="M14 11l0 6" />
                          <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                          <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                        </svg>
                      </button>
                    </div>

                    <!-- Upload Progress Section -->
                    <div id="cu_progress_container" class="cu-upload-progress mb-3">
                      <div class="progress" style="height: 6px;">
                        <div id="cu_progress_bar" class="progress-bar bg-primary" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                      <div id="cu_progress_percentage" class="text-end mt-1 small text-muted">0%</div>
                    </div>

                    <!-- CTA Buttons: Cancel & Upload -->
                    <div id="cu_cta_container" class="cu-cta-container d-flex justify-content-end gap-2">
                      <button id="cu_cancel_btn" class="cta cta-secondary" data-bs-dismiss="modal">Cancel</button>
                      <button id="cu_upload_btn" class="cta cta-primary" disabled>Upload</button>
                    </div>
                  </div>
                </div><!-- End upload wrapper -->
              </div>
            </div>
          </div>
        </div><!-- End modal-body -->
        </div>
        </div>
        </div>

        <!-- Modal: Bulk Image Upload Modal -->
        <div class="modal fade" id="bulkImageUploadModal" tabindex="-1" aria-labelledby="bulkImageUploadModalLabel" aria-hidden="true"
        data-bs-backdrop="static" data-bs-keyboard="false">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-body text-center">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-lg-12">
                      <!-- Bulk Upload Wrapper -->
                      <div id="mf_upload_wrapper" class="mf-upload-wrapper p-4">
                        <h5 class="text-start mb-3">Bulk Upload</h5>
                        <!-- Drag and Drop Area -->
                        <div id="mf_drop_area" class="mf-upload-zone text-center p-5 border border-2 border-dashed rounded-3 mb-3">
                          <div class="mf-icon mb-3">
                            <!-- You can replace with any icon; here using a files icon -->
                            <i class="bi bi-files fs-2"></i>
                          </div>
                          <p class="mb-2">
                            Drag and Drop files here or 
                            <span class="mf-choose-file text-primary" style="text-decoration: underline; cursor: pointer;">Choose files</span>
                          </p>
                          <!-- Hidden File Input accepting multiple files -->
                          <input type="file" id="mf_file_upload" class="d-none" accept="image/*" multiple>
                        </div>

                        <!-- Upload List Section: Container for each upload item -->
                        <div id="mf_upload_list" class="mf-upload-list"></div>

                        <!-- Info Row: Supported formats and Maximum size -->
                        <div class="row text-secondary small mb-4 justify-content-between mf-upload-info-row">
                          <div class="mb-2 text-start">
                            <label for="basepacksdownTab">Apply to basepacks</label>
                            <select id="basepacksdownTab" class="form-control form-select form-select-sm custom-select bg-white" style="width: 200px;margin-top:6px; background-color: #fff !important;">
                              <option value="basepacks">Select Basepack</option>
                              <option value="basepacks1">Basepack 1</option>
                              <option value="basepacks2">Basepack 2</option>
                              <option value="basepacks3">Basepack 3</option>
                            </select>
                            <p class="text-danger small pt-2 m-0"></p>
                          </div>
                        </div>
                        
                        <!-- Bulk Modal CTA Buttons: Cancel & Upload -->
                        <div id="mf_cta_container" class="mf-cta-container d-flex justify-content-end gap-2 mt-3">
                          <button id="mf_cancel_btn" class="cta cta-secondary" data-bs-dismiss="modal">Cancel</button>
                          <button id="mf_upload_btn" class="cta cta-primary" disabled>Upload</button>
                        </div>
                      
                      </div><!-- End Bulk Upload Wrapper -->
                    </div>
                  </div>
                </div>
              </div><!-- End modal-body -->
            </div><!-- End modal-content -->
          </div><!-- End modal-dialog -->
        </div><!-- End modal -->

        <!-- Modal: Bulk Image Upload Modal -->
        <div class="modal fade" id="importUploadModal" tabindex="-1" aria-labelledby="importUploadModalLabel" aria-hidden="true"
        data-bs-backdrop="static" data-bs-keyboard="false">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-body text-center">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-lg-12">
                      <!-- Import Upload Wrapper -->
                      <div id="mf_upload_wrapper" class="mf-upload-wrapper p-4">
                        <h5 class="text-start mb-3">Import Paid Asset Master</h5>
                        <div class="row text-secondary small mb-4 justify-content-between mf-upload-info-row">
                          <div class="mb-2 text-start">
                            <label for="importFromBasepacks">Import from basepack</label>
                            <select id="importFromBasepacks" class="form-control form-select form-select-sm custom-select bg-white w-100" style="margin-top:6px; background-color: #fff !important;">
                              <option value="">Select Basepack</option>
                              <option value="basepacks1">Basepack 1</option>
                              <option value="basepacks2">Basepack 2</option>
                              <option value="basepacks3">Basepack 3</option>
                            </select>
                          </div>
                        </div>

                        <!-- Preview Selected Basepack Images -->
                        <div id="import_preview_container" class="row g-2 mb-3 d-none">
                          <!-- Dynamically populated -->
                        </div>

                        <div class="row text-secondary small mb-4 justify-content-between mf-upload-info-row">
                          <div class="mb-2 text-start">
                            <label for="applybasepacksdownTab">Apply to basepacks</label>
                            <select id="applybasepacksdownTab" class="form-control form-select form-select-sm custom-select bg-white w-100" style="margin-top:6px; background-color: #fff !important;">
                              <option value="basepacks">Select Basepack</option>
                              <option value="basepacks1">Basepack 1</option>
                              <option value="basepacks2">Basepack 2</option>
                              <option value="basepacks3">Basepack 3</option>
                            </select>
                            <p class="text-danger small pt-2 m-0 d-none">Warning: These basepacks have existing PAM</p>
                          </div>
                        </div>
                        <!-- Bulk Modal CTA Buttons: Cancel & Upload -->
                        <div id="mf_cta_container" class="mf-cta-container d-flex justify-content-end gap-2 mt-3">
                          <button id="mf_cancel_btn" class="cta cta-secondary" data-bs-dismiss="modal">Cancel</button>
                          <button id="mf_upload_btn" class="cta cta-primary" disabled>Upload</button>
                        </div>
                      
                      </div><!-- End Bulk Upload Wrapper -->
                    </div>
                  </div>
                </div>
              </div><!-- End modal-body -->
            </div><!-- End modal-content -->
          </div><!-- End modal-dialog -->
        </div><!-- End modal -->

        <!-- Modal: Validation Modal -->
        <div class="modal fade" id="validationModal" tabindex="-1" aria-labelledby="validationModalLabel" aria-hidden="true"
        data-bs-backdrop="static" data-bs-keyboard="false">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-body text-center">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-lg-12">
                      <!-- Message Wrapper -->
                      <div class="iconArea">
                        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-alert-triangle"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v4" /><path d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z" /><path d="M12 16h.01" /></svg>
                      </div>

                      <h5 class="text-start mt-3 mb-4">Validation Error</h5>
                      <ul class="list-unstyled text-start">
                        <li class="mb-2">Paid Asset for basepacks missing:<br>12345, 45678</li>
                        <li class="">Mandatory Paid Asset for basepacks missing:<br>12345, 45678, 34567</li>
                      </ul>
                      <p class="text-danger small mb-4 mt-3 text-center">Action Required: Add images or raise exception</p>

                      <div id="cta_container" class="d-flex justify-content-center gap-2 mt-3">
                        <button id="mf_cancel_btn" class="cta cta-secondary" data-bs-dismiss="modal">Close</button>
                      </div>
                      
                    </div>
                  </div>
                </div>
              </div><!-- End modal-body -->
            </div><!-- End modal-content -->
          </div><!-- End modal-dialog -->
        </div><!-- End modal -->

        <!-- Modal: Scoring Progress Modal -->
        <div class="modal fade" id="scoringProgressModal" tabindex="-1" aria-labelledby="scoringProgressModalLabel" aria-hidden="true"
        data-bs-backdrop="static" data-bs-keyboard="false">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-body text-center">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-lg-12">
                      <!-- Message Wrapper -->
                      <div class="iconArea">
                        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-progress-check"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 20.777a8.942 8.942 0 0 1 -2.48 -.969" /><path d="M14 3.223a9.003 9.003 0 0 1 0 17.554" /><path d="M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592" /><path d="M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305" /><path d="M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356" /><path d="M9 12l2 2l4 -4" /></svg>
                      </div>

                      <h5 class="text-start mt-3 mb-4">Scoring in progress</h5>
                      <p class="text-secondary mb-4 mt-3 text-center">Once scoring is complete, click on individual scores to <br> access detailed scorecard for the image.</p>
                      
                      <div id="cta_container" class="d-flex justify-content-center gap-2 mt-3">
                        <button id="mf_cancel_btn" class="cta cta-secondary" data-bs-dismiss="modal">Close</button>
                      </div>
                      
                    </div>
                  </div>
                </div>
              </div><!-- End modal-body -->
            </div><!-- End modal-content -->
          </div><!-- End modal-dialog -->
        </div><!-- End modal -->

        <!-- Modal: Score Card Modal -->
        <div class="modal fade" id="scoreCardModal" tabindex="-1" aria-labelledby="scoreCardModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content score-card-modal">
              <div class="modal-header border-0">
                <h5 class="modal-title" id="scoreCardModalLabel">Score Card</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="score-summary d-flex mb-4">
                  <div class="left-info">
                    <strong>Summary</strong>
                    <p>The asset showcases strong visual appeal with realistic product visualization, impactful clusters including people presence and packshots, and a clean design featuring primary colors. However, it lacks branding elements like copy, claims, and quantified benefits, limiting its overall branding score.</p>
                  </div>
                  <div class="right-info">
                    <strong>Score</strong>
                    <p class="score-value">3/11 <br> 27%</p>
                  </div>
                  
                </div>
                <div class="table-responsive">
                  <table class="table table-bordered score-card-table">
                    <thead>
                      <tr>
                        <th>Pillar</th>
                        <th>Threshold</th>
                        <th>Direction</th>
                        <th>Value</th>
                        <th>Score</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>no_of_cluster</td>
                        <td>3-4</td>
                        <td>1</td>
                        <td>3</td>
                        <td>0</td>
                      </tr>
                      <tr>
                        <td>packshot_area</td>
                        <td>&gt;15</td>
                        <td>1</td>
                        <td>15.0</td>
                        <td>0</td>
                      </tr>
                      <tr>
                        <td>no_of_products</td>
                        <td>1&lt;</td>
                        <td>1</td>
                        <td>2</td>
                        <td>0</td>
                      </tr>
                      <tr>
                        <td>copy_area</td>
                        <td>0.0</td>
                        <td>1</td>
                        <td>0</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td>no_of_words</td>
                        <td>3-5</td>
                        <td>1</td>
                        <td>0</td>
                        <td>0</td>
                      </tr>
                      <tr>
                        <td>copy_no_of_lines</td>
                        <td>0</td>
                        <td>1</td>
                        <td>No</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td>ingredient_callout_presence</td>
                        <td>NA</td>
                        <td>1</td>
                        <td>No</td>
                        <td>0</td>
                      </tr>
                      <tr>
                        <td>copy_multipack_callout</td>
                        <td>NA</td>
                        <td>1</td>
                        <td>No</td>
                        <td>0</td>
                      </tr>
                      <tr>
                        <td>person_area</td>
                        <td>25-50</td>
                        <td>1</td>
                        <td>56.3</td>
                        <td>0</td>
                      </tr>
                      <tr>
                        <td>visual_ingredients_presence</td>
                        <td>NA</td>
                        <td>1</td>
                        <td>No</td>
                        <td>0</td>
                      </tr>
                      <tr>
                        <td>texture_swatches_presence</td>
                        <td>1</td>
                        <td>1</td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr class="total-row fw-bold">
                        <td colspan="4">Total</td>
                        <td>3/11<br>27%</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="modal-footer border-0">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>





        
        <footer class="footer-custom">
          <div class="footer-block author"> Hindustan Unilever Limited © 2024 </div>
        </footer>
        <!-- ./footer -->
      </div>
      <!-- ./app -->
    </div>
    <!-- ./main-wrapper -->
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="./assets/vendor/Bootstrap/js/bootstrap.bundle.js"></script>
    <script src="./assets/js/image_upload.js"></script>
    <script src="./assets/js/scoring-full.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // =====================================================
        // EXPAND / COLLAPSE FUNCTIONALITY
        // =====================================================
        let expanded = false;
        let originalCardsHTML = "";
        const toggleBtn = document.getElementById("toggleExpandTab");
        const accountDropdown = document.getElementById("accountDropdownTab");
        const accDropdownBtn = document.getElementById("accountDropdownBtn");
        const accStatusDot = document.getElementById("accountStatusDot");
        const collapseModal = new bootstrap.Modal(document.getElementById("collapseModal"));
        const cardsContainer = document.getElementById("cardsContainerTab");
      
        toggleBtn.addEventListener("click", function(e) {
          if (!expanded) {
            // Save the current unified view HTML.
            originalCardsHTML = cardsContainer.innerHTML;
            expanded = true;
            toggleBtn.innerHTML = '<i class="fa fa-angle-double-up" aria-hidden="true"></i><span class="expand-text">Collapse</span>';
            //accountDropdown.disabled = false;
            accDropdownBtn.disabled = false;
            //accountDropdown.value = "all";
            createGroups();
          } else {
            collapseModal.show();
          }
        });
      
        document.getElementById("modalContinue").addEventListener("click", function() {
          expanded = false;
          toggleBtn.innerHTML = '<i class="fa fa-angle-double-down" aria-hidden="true"></i><span class="expand-text">Expand</span>';
          accountDropdown.disabled = true;
          accountDropdown.value = "all";
          resetGrouping();
          collapseModal.hide();
        });
      
        document.getElementById("modalCancel").addEventListener("click", function() {
          collapseModal.hide();
        });
      
        accountDropdown.addEventListener("change", function() {
          filterGroups(this.value);
        });
      
        function filterGroups(account) {
          const groups = document.querySelectorAll(".group-section");
          groups.forEach(group => {
            const groupBrand = group.getAttribute("data-brand");
            group.style.display = (account === "all" || groupBrand === account) ? "block" : "none";
          });
        }
      
        function createGroups() {
          const container = cardsContainer;
          const tempDiv = document.createElement("div");
          tempDiv.innerHTML = originalCardsHTML;
          const cards = Array.from(tempDiv.querySelectorAll(".card-wrapper"));
          container.innerHTML = "";
      
          // Example: Build two groups: Amazon and BigBasket.
          const amazonGroup = document.createElement("div");
          amazonGroup.className = "group-section mb-4";
          amazonGroup.setAttribute("data-brand", "amazon");
          const amazonTitle = document.createElement("h4");
          amazonTitle.textContent = "Amazon";
          amazonGroup.appendChild(amazonTitle);
          const amazonRow = document.createElement("div");
          amazonRow.className = "row g-3";
      
          const bbGroup = document.createElement("div");
          bbGroup.className = "group-section mb-4";
          bbGroup.setAttribute("data-brand", "bigbasket");
          const bbTitle = document.createElement("h4");
          bbTitle.textContent = "BigBasket";
          bbGroup.appendChild(bbTitle);
          const bbRow = document.createElement("div");
          bbRow.className = "row g-3";
      
          cards.forEach(card => {
            const amazonCard = card.cloneNode(true);
            amazonCard.setAttribute("data-brand", "amazon");
            amazonRow.appendChild(amazonCard);
            
            const bbCard = card.cloneNode(true);
            bbCard.setAttribute("data-brand", "bigbasket");
            bbRow.appendChild(bbCard);
          });
          amazonGroup.appendChild(amazonRow);
          bbGroup.appendChild(bbRow);
          container.appendChild(amazonGroup);
          container.appendChild(bbGroup);
        }
      
        function resetGrouping() {
          cardsContainer.innerHTML = originalCardsHTML;
        }
      
        // =====================================================
        // LIGHTBOX FUNCTIONALITY - CARD BODY CLICK TO ENLARGE IMAGE
        // =====================================================
        cardsContainer.addEventListener("click", function(e) {
          const ignoreClasses = ["plus-icon", "delete-icon", "info-icon"];
          if (ignoreClasses.some(cls => e.target.classList.contains(cls))) return;
          const cardBody = e.target.closest(".card-body");
          if (cardBody) {
            const bg = getComputedStyle(cardBody).backgroundImage;
            if (bg && bg !== "none") {
              const url = bg.slice(5, -2);
              const lightboxModalEl = document.getElementById("lightboxModal");
              const lightboxModal = new bootstrap.Modal(lightboxModalEl);
              lightboxModalEl.querySelector("img").src = url;
              lightboxModal.show();
            }
          }
        });
      
        // =====================================================
        // DRAG & DROP BETWEEN CARDS
        // =====================================================
        let dragSourceCard = null;
        cardsContainer.addEventListener("dragstart", function(e) {
          const card = e.target.closest(".card-wrapper");
          if (card) {
            const cardBody = card.querySelector(".card-body");
            const bg = cardBody ? getComputedStyle(cardBody).backgroundImage : "";
            if (!bg || bg === "none") {
              e.preventDefault();
              return;
            }
            dragSourceCard = card;
            const url = bg.slice(5, -2);
            const dragImg = document.createElement("img");
            dragImg.src = url;
            dragImg.style.opacity = "0.5";
            dragImg.style.width = "120px";
            dragImg.style.height = "120px";
            document.body.appendChild(dragImg);
            e.dataTransfer.setDragImage(dragImg, 60, 60);
            setTimeout(() => { document.body.removeChild(dragImg); }, 0);
            e.dataTransfer.setData("text/plain", card.getAttribute("data-card-name"));
          }
        });
        
        cardsContainer.addEventListener("dragover", function(e) {
          e.preventDefault();
        });
        
        cardsContainer.addEventListener("drop", function(e) {
          e.preventDefault();
          const targetCard = e.target.closest(".card-wrapper");
          if (dragSourceCard && targetCard && targetCard !== dragSourceCard) {
            const targetBody = targetCard.querySelector(".card-body");
            if (targetBody && getComputedStyle(targetBody).backgroundImage === "none") {
              const sourceBody = dragSourceCard.querySelector(".card-body");
              const sourceBg = sourceBody ? getComputedStyle(sourceBody).backgroundImage : "";
              if (sourceBg && sourceBg !== "none") {
                setCardImage(targetCard, sourceBg.slice(5, -2));
                clearCardImage(dragSourceCard);
              }
            }
          }
          dragSourceCard = null;
        });
      
        // =====================================================
        // SINGLE IMAGE UPLOAD MODAL FUNCTIONALITY
        // =====================================================
        let currentCard = null;
        let selectedImageData = null;
        let uploadProgressInterval = null;
        let fileSelected = false;
        const singleUploadModalEl = document.getElementById("singleimageUploadModal");
        const singleUploadModal = new bootstrap.Modal(singleUploadModalEl);
        const cuFileInput = document.getElementById("cu_file_upload");
        const cuThumbnail = document.getElementById("cu_thumbnail");
        const cuFilename = document.getElementById("cu_filename");
        const cuFilesize = document.getElementById("cu_filesize");
        const cuProgressContainer = document.getElementById("cu_progress_container");
        const cuProgressBar = document.getElementById("cu_progress_bar");
        const cuProgressPercentage = document.getElementById("cu_progress_percentage");
        const cuDeleteBtn = document.getElementById("cu_delete_btn");
        const cuCancelBtn = document.getElementById("cu_cancel_btn");
        const cuUploadBtn = document.getElementById("cu_upload_btn");
        const cuChooseFile = document.querySelector(".cu-choose-file");
        const cuUploadDetails = document.getElementById("cu_upload_details");
      
        // Reset single modal state whenever it’s shown.
        singleUploadModalEl.addEventListener("show.bs.modal", function() {
          resetSingleModal();
        });
      
        // Open single upload modal when a card’s plus icon is clicked.
        cardsContainer.addEventListener("click", function(e) {
          if (e.target.classList.contains("plus-icon")) {
            currentCard = e.target.closest(".card-wrapper");
            resetSingleModal();
            singleUploadModal.show();
            e.stopPropagation();
          }
          if (e.target.classList.contains("delete-icon")) {
            const card = e.target.closest(".card-wrapper");
            if (card) {
              clearCardImage(card);
            }
          }
        });
        
        cuChooseFile.addEventListener("click", function(e) {
          //alert('start 1');
          e.preventDefault();
          //alert('start 2');
          e.stopPropagation();
          //alert('start 3');
          if (!fileSelected) {
            //alert('start 4');
            cuFileInput.click();
            //alert('start 5');
          }
        });
        
        cuFileInput.addEventListener("change", function() {
          if (uploadProgressInterval) {
            clearInterval(uploadProgressInterval);
            uploadProgressInterval = null;
          }
          const file = this.files[0];
          if (file) {
            if (!file.type.startsWith("image/")) {
              alert("Please select an image file.");
              return;
            }
            fileSelected = true;
            cuFileInput.disabled = true;
            cuUploadDetails.classList.remove("d-none");
            cuFilename.textContent = file.name;
            cuFilesize.textContent = (file.size / (1024 * 1024)).toFixed(2) + " MB";
            const reader = new FileReader();
            reader.onload = function(e) {
              selectedImageData = e.target.result;
              cuThumbnail.src = selectedImageData;
            };
            reader.readAsDataURL(file);
            startSingleSimulatedUpload();
          }
        });
        
        function startSingleSimulatedUpload() {
          cuProgressBar.style.width = "0%";
          cuProgressBar.setAttribute("aria-valuenow", 0);
          cuProgressPercentage.textContent = "0%";
          cuProgressContainer.style.display = "block";
          cuCancelBtn.disabled = true;
          cuUploadBtn.disabled = true;
          cuDeleteBtn.classList.add("d-none");
        
          let progress = 0;
          uploadProgressInterval = setInterval(function() {
            progress += 10;
            if (progress > 100) progress = 100;
            cuProgressBar.style.width = progress + "%";
            cuProgressBar.setAttribute("aria-valuenow", progress);
            cuProgressPercentage.textContent = progress + "%";
            if (progress === 100) {
              clearInterval(uploadProgressInterval);
              uploadProgressInterval = null;
              cuProgressContainer.style.display = "none";
              cuDeleteBtn.classList.remove("d-none");
              cuCancelBtn.disabled = false;
              cuUploadBtn.disabled = false;
            }
          }, 500);
        }
        
        cuUploadBtn.addEventListener("click", function() {
          if (selectedImageData && currentCard) {
            setCardImage(currentCard, selectedImageData);
            singleUploadModal.hide();
            resetSingleModal();
          }
        });
        
        cuCancelBtn.addEventListener("click", function() {
          singleUploadModal.hide();
          resetSingleModal();
        });
        
        cuDeleteBtn.addEventListener("click", function() {
          resetSingleModal();
        });
        
        function resetSingleModal() {
          cuFileInput.value = "";
          cuFileInput.disabled = false;
          fileSelected = false;
          selectedImageData = null;
          cuThumbnail.src = "";
          cuFilename.textContent = "";
          cuFilesize.textContent = "";
          cuProgressBar.style.width = "0%";
          cuProgressBar.setAttribute("aria-valuenow", 0);
          cuProgressPercentage.textContent = "0%";
          cuProgressContainer.style.display = "block";
          cuDeleteBtn.classList.add("d-none");
          cuCancelBtn.disabled = true;
          cuUploadBtn.disabled = true;
          cuUploadDetails.classList.add("d-none");
          if (uploadProgressInterval) {
            clearInterval(uploadProgressInterval);
            uploadProgressInterval = null;
          }
        }
        
        function setCardImage(card, src) {
          if (!card) return;
          const cardBody = card.querySelector(".card-body");
          if (cardBody) {
            cardBody.style.backgroundImage = `url('${src}')`;
            cardBody.style.backgroundSize = "cover";
            cardBody.style.backgroundPosition = "center";
          }
          const plusIcon = card.querySelector(".plus-icon");
          const deleteIcon = card.querySelector(".delete-icon");
          if (plusIcon) plusIcon.style.display = "none";
          if (deleteIcon) deleteIcon.style.display = "inline-block";
        }
        
        function clearCardImage(card) {
          if (!card) return;
          const cardBody = card.querySelector(".card-body");
          if (cardBody) {
            cardBody.style.backgroundImage = "none";
          }
          const plusIcon = card.querySelector(".plus-icon");
          const deleteIcon = card.querySelector(".delete-icon");
          if (plusIcon) plusIcon.style.display = "inline-block";
          if (deleteIcon) deleteIcon.style.display = "none";
        }
        
        // =====================================================
        // ADD NEW PAM ROW
        // =====================================================
        const pamDropdown = document.getElementById("pamAddDropdown");
        const pamContainer = document.getElementById("cardsContainer");
        const pamRowTemplate = document.getElementById("pamRowTemplate");

        if (pamDropdown && pamContainer && pamRowTemplate) {
          pamDropdown.addEventListener("change", function () {
            const ratio = this.value;
            if (!ratio || ratio === "Add PAM") return;
            const newRow = pamRowTemplate.cloneNode(true);
            newRow.removeAttribute("id");
            const ratioHeading = newRow.querySelector(".card-wrapper.text-center h4");
            if (ratioHeading) {
              ratioHeading.textContent = ratio;
            }
            newRow.querySelectorAll(".card-body").forEach(cb => {
              cb.style.backgroundImage = "none";
            });
            newRow.querySelectorAll(".plus-icon").forEach(icon => icon.style.display = "inline-block");
            newRow.querySelectorAll(".delete-icon").forEach(icon => icon.style.display = "none");
            pamContainer.appendChild(newRow);
            this.value = "Add PAM";
          });
        }

        // Extra: When any modal shows, add a custom class to <body>; remove when all modals are hidden.
        $("#staticBackdrop, #collapseModal, #exceptionModal, #exceptionApprovalModal, #lightboxModal, #singleimageUploadModal, #bulkImageUploadModal").on("shown.bs.modal", function () {
          $("body").addClass("modal-custom");
        });
        
        $("##staticBackdrop, #collapseModal, #exceptionModal, #exceptionApprovalModal, #lightboxModal, #singleimageUploadModal, #bulkImageUploadModal").on("hidden.bs.modal", function () {
          if ($(".modal.show").length === 0) {
            $("body").removeClass("modal-custom");
          }
        });

      });


      // =====================================================
      // BULK (MULTIPLE) FILE UPLOAD MODAL FUNCTIONALITY
      // =====================================================
      $(document).ready(function () {
        const $input = $('#mf_file_upload');
        const $trigger = $('.mf-choose-file');
        const $dropArea = $('#mf_drop_area');
        const $preview = $('#mf_upload_list');
        const $uploadBtn = $('#mf_upload_btn');

        // Make drop area clickable
        $dropArea.on('click', function (e) {
          // Prevent double trigger from inner button
          if (!$(e.target).is('input') && !$(e.target).hasClass('mf-remove-thumb')) {
            $input.trigger('click');
          }
        });

        // Separate trigger from "Choose files"
        $trigger.on('click', function (e) {
          e.stopPropagation(); // Prevent bubble to drop area
          $input.trigger('click');
        });

        // Handle file input
        $input.on('change', function (e) {
          const files = Array.from(e.target.files);
          files.forEach(renderPreview);
        });

        // Drag & Drop events
        $dropArea.on('dragover', function (e) {
          e.preventDefault();
          $(this).addClass('border-primary bg-light');
        });

        $dropArea.on('dragleave', function (e) {
          e.preventDefault();
          $(this).removeClass('border-primary bg-light');
        });

        $dropArea.on('drop', function (e) {
          e.preventDefault();
          $(this).removeClass('border-primary bg-light');
          const files = Array.from(e.originalEvent.dataTransfer.files);
          files.forEach(renderPreview);
        });

        // Render preview
        function renderPreview(file) {
          if (!file.type.startsWith('image/')) return;

          const reader = new FileReader();
          reader.onload = function (e) {
            const size = (file.size / 1024 / 1024).toFixed(2) + ' MB';
            const $item = $(`
              <div class="mf-upload-thumb position-relative d-inline-block me-2 mb-2 text-center" style="width: 110px;">
                <img src="${e.target.result}" class="img-thumbnail mb-1" style="width: 100px; height: 100px; object-fit: cover;">
                <div class="small text-truncate" title="${file.name}">${file.name}</div>
                <div class="small text-muted">${size}</div>
                <span class="mf-remove-thumb position-absolute top-0 end-0 p-1" style="cursor: pointer;" title="Remove">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round"
                    class="icon icon-tabler icon-tabler-trash">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <path d="M4 7l16 0" />
                    <path d="M10 11l0 6" />
                    <path d="M14 11l0 6" />
                    <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                    <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                  </svg>
                </span>
              </div>
            `);
            $preview.append($item);
            toggleUploadBtn();
          };
          reader.readAsDataURL(file);
        }

        // Remove preview
        $(document).on('click', '.mf-remove-thumb', function () {
          $(this).closest('.mf-upload-thumb').remove();
          toggleUploadBtn();
        });

        // Enable/Disable Upload
        function toggleUploadBtn() {
          $uploadBtn.prop('disabled', $preview.children().length === 0);
        }

        // Reset modal
        $('#bulkImageUploadModal').on('hidden.bs.modal', function () {
          $preview.empty();
          $input.val('');
          toggleUploadBtn();
        });
      });



      $(document).ready(function () {
        const $dropdown = $('#pamAddDropdown');
        const $container = $('#pamCardContainer');

        $dropdown.on('change', function () {
          const selectedValue = $(this).val();
          if (!selectedValue) return;

          const $card = $(`
            <div class="card-wrapper-main row g-3 align-items-center mb-3" style="display: none;">
              <div class="col-md-2 card-wrapper text-center position-relative">
                <h4>${selectedValue}</h4>
                <span class="remove-icon position-absolute top-0 end-0 me-2 mt-2" style="cursor:pointer;" title="Remove">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round"
                    class="icon icon-tabler icon-tabler-trash">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <path d="M4 7l16 0" />
                    <path d="M10 11l0 6" />
                    <path d="M14 11l0 6" />
                    <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                    <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                  </svg>
                </span>
              </div>

              ${Array(5).fill().map(() => `
                <div class="col-md-2 card-wrapper" data-card-name="BOP" data-info="This is the BOP card tooltip.">
                  <div class="card image-card" draggable="true">
                    <div class="card-header d-flex justify-content-between align-items-center card-title-wrapper">
                      <div class="card-title-container">
                        <span class="card-title">BOP <span class="text-danger">*</span></span>
                        <i class="fa fa-info-circle info-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Information about BOP" style="visibility: hidden; cursor: pointer;"></i>
                      </div>
                      <span class="action-area">
                        <span class="score"></span>
                        <i class="fa fa-trash-o delete-icon" title="Delete image" style="display: none; cursor: pointer;"></i>
                      </span>
                    </div>
                    <div class="card-body d-flex flex-column justify-content-center align-items-center position-relative">
                      <i class="fa fa-plus plus-icon" aria-hidden="true" style="font-size: 1.4rem; cursor: pointer;"></i>
                      <img src="" alt="Uploaded Image" class="img-fluid card-image" style="display: none; max-height:150px; object-fit:contain; cursor: pointer;">
                    </div>
                  </div>
                </div>
              `).join('')}
            </div>
          `);

          // Append with animation
          $container.append($card);
          $card.slideDown(200).css({ opacity: 0 }).animate({ opacity: 1 }, 200);

          // Reset to placeholder
          $dropdown.prop('selectedIndex', 0);

          // Remove logic
          $card.find('.remove-icon').on('click', function () {
            $card.animate({ opacity: 0 }, 200).slideUp(200, function () {
              $card.remove();
            });
          });
        });
      });

      // Global reusable file input
      const $imageInput = $('<input type="file" accept="image/*" style="display:none">');
      $('body').append($imageInput);

      // Open file picker on plus icon click
      $(document).on('click', '.plus-icon', function () {
        const $card = $(this).closest('.card-body');
        $imageInput.data('targetCard', $card);
        $imageInput.val(null); // reset file
        $imageInput.trigger('click');
      });

      // Handle image selection
      $imageInput.on('change', function (e) {
        const file = e.target.files[0];
        if (!file || !file.type.startsWith('image/')) {
          alert('Please select an image file only.');
          return;
        }

        const reader = new FileReader();
        const $card = $imageInput.data('targetCard');
        const $plus = $card.find('.plus-icon');
        const $trash = $card.closest('.image-card').find('.delete-icon');

        reader.onload = function (e) {
          $card.css({
            'background-image': `url(${e.target.result})`,
            'background-size': 'contain',
            'background-repeat': 'no-repeat',
            'background-position': 'center'
          });
          $plus.hide();
          $trash.show();
        };

        reader.readAsDataURL(file);
      });

      // Handle trash icon to reset background
      $(document).on('click', '.delete-icon', function () {
        const $card = $(this).closest('.image-card').find('.card-body');
        $card.css('background-image', '');
        $card.find('.plus-icon').show();
        $(this).hide();
      });

      // Handle full row removal
      $(document).on('click', '.card-wrapper-main .remove-icon', function () {
        const $row = $(this).closest('.card-wrapper-main');
        $row.find('.card-body').css('background-image', '');
        $row.find('.plus-icon').show();
        $row.find('.delete-icon').hide();

        $row.animate({ opacity: 0 }, 200).slideUp(200, function () {
          $row.remove();
        });
      });

      // =====================================================
      // BASEPACKS IMPORT FUNCTIONALITY
      // =====================================================

      $(document).ready(function () {
  const basepackImages = {
    basepacks1: [
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU',
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU',
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU',
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU'
    ],
    basepacks2: [
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU',
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU',
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU',
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU'
    ],
    basepacks3: [
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU',
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU',
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU',
      'https://fastly.picsum.photos/id/0/5000/3333.jpg?hmac=_j6ghY5fCfSD6tvtcV74zXivkJSPIfR9B8w34XeQmvU'
    ]
  };

  $('#importFromBasepacks').on('change', function () {
    const selected = $(this).val();
    const $previewContainer = $('#import_preview_container');

    $previewContainer.empty().addClass('d-none');

    if (selected && basepackImages[selected]) {
      basepackImages[selected].forEach(src => {
        $previewContainer.append(`
          <div class="col-3">
            <div class="border rounded p-2 text-center">
              <img src="${src}" alt="Preview" class="img-fluid mb-1" style="height: 100px; object-fit: cover;">
              <div class="small text-muted">${src.split('?text=')[1]}</div>
            </div>
          </div>
        `);
      });
      $previewContainer.removeClass('d-none');
    }
  });
});

$(document).ready(function () {
  // When the Score button is clicked: show modal & trigger scoring immediately
  $('#scoreBtn').on('click', function () {
    // Show scoring modal (keep your existing attribute: works automatically)
    // Now trigger scoring logic instantly:
    runScoringLogic();
  });

  // The scoring function
  function runScoringLogic() {
    let hasAnyScore = false; // Track if we scored at least one

    $('.image-card').each(function () {
      const $card = $(this);
      const $cardBody = $card.find('.card-body');
      const bgImage = $cardBody.css('background-image');

      const $score = $card.find('.score');

      if (bgImage && bgImage !== 'none') {
        hasAnyScore = true; // ✅ Mark that we have at least one

        const randomScore = Math.floor(Math.random() * 101); // 0-100
        const isDanger = randomScore < 50;

        $score.removeClass('danger success')
              .addClass(isDanger ? 'danger' : 'success')
              .text('0%')
              .show();

        // Animate score from 0 to final value
        $({ countNum: 0 }).animate({ countNum: randomScore }, {
          duration: 800,
          easing: 'swing',
          step: function () {
            $score.text(Math.floor(this.countNum) + '%');
          },
          complete: function () {
            $score.text(this.countNum + '%');
          }
        });

      } else {
        $score.text('').hide();
      }
    });

    // ✅ Show or hide the download button
    if (hasAnyScore) {
      $('#downloadScoreButton').show();
    } else {
      $('#downloadScoreButton').hide();
    }
  }

  // Reset score when deleting image
  $(document).on('click', '.delete-icon', function () {
    const $card = $(this).closest('.image-card');
    const $score = $card.find('.score');
    $score.text('').hide();

    // Also hide download button if no scores left
    const anyVisible = $('.score:visible').length > 1; // >1 because this one is being deleted now
    if (!anyVisible) {
      $('#downloadScoreButton').hide();
    }
  });

});




    </script>
      
      
      
      
      
      
  </body>
</html>
